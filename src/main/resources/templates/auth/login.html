<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="~{fragments/layout :: head('Sign in')}"></head>
<body class="resume">
  <div th:replace="~{fragments/layout :: header}"></div>
  <div class="layout-content">
    <div class="l-container" style="max-width: 520px;">
      <div class="c-panel c-panel--default">
        <div class="c-panel__heading">
          <h4 class="c-panel__title"><i class="fa fa-sign-in"></i> Вхід у ваш особистий кабінет</h4>
        </div>
        <div class="c-panel__body">
          <p class="u-text-muted">Використовуйте ваш логін (username).</p>
          <form th:action="${appHost} + @{/login}" method="post">
            <div class="c-form__group">
              <label for="username">Логін (username)</label>
              <input id="username" name="username" type="text" class="c-input" required>
            </div>
            <div class="c-form__group">
              <label for="password">Пароль</label>
              <input id="password" name="password" type="password" class="c-input" required>
              <div style="margin-top: 6px;">
                <label style="font-weight: normal; cursor: pointer;">
                  <input type="checkbox" id="togglePassword"> Показати пароль
                </label>
              </div>
            </div>
            <div class="c-checkbox">
              <label>
                <input type="checkbox" name="remember-me"> Запам'ятати мене
              </label>
            </div>
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
            <div th:if="${param.expired}" class="c-alert c-alert--warning" style="margin-top: 10px;">
              Сесія завершилась. Увійдіть знову.
            </div>
            <div th:if="${param.error}" class="c-alert c-alert--danger" style="margin-top: 10px;">
              Невірний логін або пароль
            </div>
            <button type="submit" class="c-button c-button--primary c-button--block">Увійти</button>
          </form>
          <div class="u-text-center" style="margin-top: 10px;">
            <a th:href="${appHost} + @{/register}">Зареєструватися</a>
          </div>
          <div class="u-text-center" style="margin-top: 6px;">
            <a th:href="${appHost} + @{/restore}">Забули пароль?</a>
          </div>
        </div>
      </div>
    </div>
  </div>
<div th:replace="~{fragments/layout :: footer}"></div>
<th:block th:replace="~{fragments/layout :: scripts-base}"></th:block>
  <script>
    (function() {
      var toggle = document.getElementById('togglePassword');
      var pwd = document.getElementById('password');
      if (toggle && pwd) {
        toggle.addEventListener('change', function () {
          pwd.type = this.checked ? 'text' : 'password';
        });
      }
    })();
  </script>
</body>
</html>
