<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Taschenrechner</title>
</head>
<body>

    <h2>ðŸ§® Taschenrechner</h2>
    <input type="text" id="display" readonly style="width: 300px; font-size: 1.5em;" />
    
    <div style="width: 309px; display: grid; grid-template-columns: repeat(4, 1fr); gap: 5px; margin-top: 10px;">
      <button onclick="appendNumber('7')">7</button>
      <button onclick="appendNumber('8')">8</button>
      <button onclick="appendNumber('9')">9</button>
      <button onclick="setOperator('/')">/</button>
    
      <button onclick="appendNumber('4')">4</button>
      <button onclick="appendNumber('5')">5</button>
      <button onclick="appendNumber('6')">6</button>
      <button onclick="setOperator('*')">*</button>
    
      <button onclick="appendNumber('1')">1</button>
      <button onclick="appendNumber('2')">2</button>
      <button onclick="appendNumber('3')">3</button>
      <button onclick="setOperator('-')">âˆ’</button>
    
      <button onclick="appendNumber('0')">0</button>
      <button onclick="clearDisplay()">C</button>
      <button onclick="calculate()">=</button>
      <button onclick="setOperator('+')">+</button>
    </div>
    
    <script>
    let current = '';
    let operator = '';
    let operand1 = '';
    let operand2 = '';
    
    function appendNumber(num) {
      current += num;
      updateDisplay(current);
    }
    
    function setOperator(op) {
      if (current === '') return;
      operand1 = current;
      operator = op;
      current = '';
      updateDisplay(op);
    }
    
    function calculate() {
      if (operand1 === '' || current === '' || operator === '') return;
      operand2 = current;
      let result = 0;
      const a = parseFloat(operand1);
      const b = parseFloat(operand2);
    
      switch (operator) {
        case '+': result = a + b; break;
        case '-': result = a - b; break;
        case '*': result = a * b; break;
        case '/': result = b !== 0 ? a / b : 'Division durch 0!'; break;
        default: result = 'Fehler';
      }
    
      updateDisplay(result);
      // Reset state
      current = result.toString();
      operand1 = '';
      operand2 = '';
      operator = '';
    }
    
    function clearDisplay() {
      current = '';
      operand1 = '';
      operand2 = '';
      operator = '';
      updateDisplay('');
    }
    
    function updateDisplay(value) {
      document.getElementById('display').value = value;
    }
    </script>

    
    <h1>ðŸ§® Schriftliche Division</h1>
    <form th:action="@{/divide}" method="post">
        <label>Dividend:</label>
        <input type="text" name="dividend" /><br/><br/>
        <label>Divisor:</label>
        <input type="text" name="divisor" /><br/><br/>
        <button type="submit">Berechnen</button>
    </form>

    <pre th:if="${message}" th:text="${message}">[Ergebnis]</pre>
    
<ul th:if="${history != null}">
    <li th:each="item : ${history}" th:text="${item}"></li>
</ul>

</body>
</html>
