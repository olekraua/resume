<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/layout :: head('Edit Profile')}"></head>
<body class="resume">
<div th:replace="~{fragments/layout :: header}"></div>
<div class="layout-content l-container">
  <div th:replace="~{edit/_nav :: nav}"></div>

  <div class="c-panel c-panel--default edit-profile">
    <div class="c-panel__body">
      <h2 class="u-text-center" th:text="${profile.fullName}">Full Name</h2>

      <form id="removeProfilePhotoForm" th:action="${appHost} + @{|/${profile.uid}/edit/photo/remove|}" method="post">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
      </form>

      <form th:action="${appHost} + @{|/${profile.uid}/edit/profile|}" method="post" th:object="${form}" class="c-form c-form--horizontal data-form" enctype="multipart/form-data">
        <div th:if="${#fields.hasErrors('*')}" class="c-alert c-alert--danger">
          <ul>
            <li th:each="err : ${#fields.errors('*')}" th:text="${err}">Error</li>
          </ul>
        </div>
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

        <div class="c-form__group">
          <label for="profilePhoto" class="l-col l-col--sm-2 c-form__label">Фото <span class="u-text-muted">(опційно)</span></label>
          <div class="l-col l-col--sm-5">
            <img id="currentPhoto" th:src="${profile.largePhoto != null ? profile.largePhoto : '/assets/img/profile-placeholder.png'}" class="edit-photo u-img-responsive" alt="photo"/><br/>
            <div class="c-file c-file--photo" data-file-input>
              <input type="file" th:field="*{profilePhoto}" id="profilePhoto" class="c-file__input" accept="image/*"/>
              <div class="c-file__group">
                <div class="c-file__caption" data-file-caption aria-live="polite">Файл не обрано</div>
                <button type="button" class="c-button c-button--secondary c-file__clear" data-file-clear aria-label="Очистити вибір" disabled>
                  <i class="fa fa-times" aria-hidden="true"></i>
                  <span class="u-sr-only">Очистити</span>
                </button>
                <button type="button"
                        class="c-button c-button--primary c-file__action"
                        data-file-action
                        data-label-idle="Завантажити"
                        data-label-ready="Зберегти"
                        data-icon-idle="fa-folder-open"
                        data-icon-ready="fa-save">
                  <i class="fa fa-folder-open" data-file-action-icon aria-hidden="true"></i>
                  <span data-file-action-label>Завантажити</span>
                </button>
                <button type="submit"
                        class="c-button c-button--secondary"
                        form="removeProfilePhotoForm"
                        th:if="${profile.largePhoto != null or profile.smallPhoto != null}"
                        style="margin-left: 8px;">
                  <i class="fa fa-trash-o" aria-hidden="true"></i>
                  <span>Видалити</span>
                </button>
              </div>
            </div>
            <div th:if="${#fields.hasErrors('profilePhoto')}" class="c-form__help" th:errors="*{profilePhoto}">Invalid</div>
          </div>
          <div class="l-col l-col--sm-5 c-form__help">
            <blockquote>
              1. Фотографія повинна бути охайною, як для резюме.<br/>
              2. Мінімальний розмір 400x400, тільки jpg/png, до 5MB.<br/>
              3. Фото на паспорт не обов’язкове, але вигляд — акуратний.<br/>
              4. Приклад можна переглянути в демо-резюме.
            </blockquote>
          </div>
        </div>

        <div class="c-form__group">
          <label for="inputBirthDay" class="l-col l-col--sm-2 c-form__label">Дата народження <span class="u-text-muted">(опційно)</span></label>
          <div class="l-col l-col--sm-5">
            <input class="c-input datepicker" type="text" th:field="*{birthDay}" id="inputBirthDay" placeholder="1990-12-31"/>
            <div th:if="${#fields.hasErrors('birthDay')}" class="c-form__help" th:errors="*{birthDay}">Invalid</div>
          </div>
          <div class="l-col l-col--sm-5 c-form__help">
            <blockquote>Формат дати: yyyy-mm-dd (чотири цифри року — код місяця — день народження)</blockquote>
          </div>
        </div>

        <div class="c-form__group">
          <label for="inputCountry" class="l-col l-col--sm-2 c-form__label">Країна <span class="u-text-muted">(опційно)</span></label>
          <div class="l-col l-col--sm-5">
            <input class="c-input" type="text" th:field="*{country}" id="inputCountry" placeholder="Ukraine"/>
            <div th:if="${#fields.hasErrors('country')}" class="c-form__help" th:errors="*{country}">Invalid</div>
          </div>
          <div class="l-col l-col--sm-5 c-form__help"></div>
        </div>

        <div class="c-form__group">
          <label for="inputCity" class="l-col l-col--sm-2 c-form__label">Місто <span class="u-text-muted">(опційно)</span></label>
          <div class="l-col l-col--sm-5">
            <input class="c-input" type="text" th:field="*{city}" id="inputCity" placeholder="Kyiv"/>
            <div th:if="${#fields.hasErrors('city')}" class="c-form__help" th:errors="*{city}">Invalid</div>
          </div>
          <div class="l-col l-col--sm-5 c-form__help"></div>
        </div>

        <div class="c-form__group">
          <label for="inputEmail" class="l-col l-col--sm-2 c-form__label">Email <span class="u-text-muted">(опційно)</span></label>
          <div class="l-col l-col--sm-5">
            <input class="c-input" type="email" th:field="*{email}" id="inputEmail" placeholder="example@gmail.com"/>
            <div th:if="${#fields.hasErrors('email')}" class="c-form__help" th:errors="*{email}">Invalid</div>
          </div>
          <div class="l-col l-col--sm-5 c-form__help">
            <blockquote>
              1. Бажано ім’я+прізвище латиницею (@gmail.com).<br/>
              2. Уникайте креативних адрес типу TheBestDeveloper@...<br/>
              3. Не використовуйте корпоративну пошту поточного роботодавця.
            </blockquote>
          </div>
        </div>

        <div class="c-form__group">
          <label for="inputPhone" class="l-col l-col--sm-2 c-form__label">Телефон <span class="u-text-muted">(опційно)</span></label>
          <div class="l-col l-col--sm-5">
            <input class="c-input" type="text" th:field="*{phone}" id="inputPhone" placeholder="+380501234567"/>
            <div th:if="${#fields.hasErrors('phone')}" class="c-form__help" th:errors="*{phone}">Invalid</div>
          </div>
          <div class="l-col l-col--sm-5 c-form__help">
            <blockquote>
              1. Формат E.164: код країни + номер без пробілів.<br/>
              2. Вкажіть номер, на який реально відповідаєте.
            </blockquote>
          </div>
        </div>

        <div class="c-form__group">
          <label for="inputObjective" class="l-col l-col--sm-2 c-form__label">Жадана посада <span class="u-text-muted">(опційно)</span></label>
          <div class="l-col l-col--sm-5">
            <input class="c-input" type="text" th:field="*{objective}" id="inputObjective" placeholder="Junior Java Developer position"/>
            <div th:if="${#fields.hasErrors('objective')}" class="c-form__help" th:errors="*{objective}">Invalid</div>
          </div>
          <div class="l-col l-col--sm-5 c-form__help">
            <blockquote>Коротко й чітко: бажана посада (1 рядок).</blockquote>
          </div>
        </div>

        <div class="c-form__group">
          <label for="inputSummary" class="l-col l-col--sm-2 c-form__label">Ваша кваліфікація <span class="u-text-muted">(опційно)</span></label>
          <div class="l-col l-col--sm-5">
            <textarea class="c-input" rows="7" th:field="*{summary}" id="inputSummary" placeholder="Досвід, курси, проєкти"></textarea>
            <div th:if="${#fields.hasErrors('summary')}" class="c-form__help" th:errors="*{summary}">Invalid</div>
          </div>
          <div class="l-col l-col--sm-5 c-form__help">
            <blockquote>
              1. Лише релевантний досвід/проєкти під обрану роль.<br/>
              2. Додайте курси з демо/посиланнями, якщо є.<br/>
              3. Стислі тези 3–5 пунктів.
            </blockquote>
          </div>
        </div>

        <div class="c-form__group">
          <label for="inputInfo" class="l-col l-col--sm-2 c-form__label">Додаткова інформація</label>
          <div class="l-col l-col--sm-5">
            <textarea class="c-input" rows="5" th:field="*{info}" id="inputInfo" placeholder="Додаткові відомості"></textarea>
            <div th:if="${#fields.hasErrors('info')}" class="c-form__help" th:errors="*{info}">Invalid</div>
          </div>
          <div class="l-col l-col--sm-5 c-form__help"></div>
        </div>

        <div class="c-form__group">
          <div class="l-col--sm-offset-2 l-col l-col--sm-10">
            <button type="submit" class="c-button c-button--primary">Зберегти</button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
<div th:replace="~{fragments/layout :: footer}"></div>
<th:block th:replace="~{fragments/layout :: scripts-base}"></th:block>
<th:block th:replace="~{fragments/layout :: scripts-edit}"></th:block>
<script th:inline="javascript">
/*<![CDATA[*/
  resume.onReady(function(){
    resume.createPhotoUploader();
    resume.createDatePicker();
  });
/*]]>*/
</script>
</body>
</html>
